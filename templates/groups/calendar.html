{% extends "website/layout.html" %}
{% block TITLE %}Actarium - Actas{% endblock %}

{%block body%}
<article>
    <h2>Pr&oacute;ximas reuniones</h2>
    <hr>
    <section id="calendar" >
        <div id="datepicker">Cargando calendario...
            <img src="/static/img/load16.gif" alt="cargando calendario"/>
        </div>
        <div class="center">
            <a href="/groups/calendar" class="btn btn-success ">Ver todas las reuniones</a>
        </div>
    </section>
    <section id="reunions" >
        <h3>Listado de reuniones DD/MM</h3>
        <ul>
            {% for reunion in reunions_day %}
            <li>
                <span class="">
                    <strong>Usuario</strong> te invit&oacute; a una reuni&oacute;n del grupo <a href="/groups/{{invitation.id_group.slug}}">{{reunion.id_group.name}}</a> 
                    <br />
                    El d&iacute;a DD a las: <time>{{reunion.date_reunion|date:"h:i A"}}</time>
                </span>
                <div class="botonera">
                    <a href="#" class="btn btn-small btn-info">Asistir&eacute;</a>
                    <a href="#" class="btn btn-small">No Asistir&eacute;</a>
                    <a class="btn btn-link" href="#">Ver m&aacute;s</a>
                </div>
                <hr>
            </li>
            {% endfor %}
        </ul>
    </section>
</article>
{%endblock%}
{%block style%}
<style>
    h2{
        margin-left: 20px;
    }
    h3{
        margin-bottom: 20px;
    }
    .form-horizontal table{
        margin: auto;
        width: auto;
    }

    table td .btn{
        margin-top:10px;
    }
    #calendar {
        padding-left: 30px;
        padding-top: 10px;
        float:left;
    }
    #reunions {
        width: 490px;
        margin-left: 40px;
        float:left;
    }
    #reunions > ul li{
        font-size: 14px;
        list-style: none;
    }
    #reunions > ul{

        margin-left: 0;
    }
    .btn-link{
        padding-left: 0;
    }
    .botonera{
        display:block;
        margin-top:10px;
    }
    .center{
        margin: 10px auto;
        width: 180px;
    }
</style>
<link rel="stylesheet" media="all" type="text/css" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
{%endblock%}

{% block js %}
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<script>$("#menu-reunions").addClass("active")</script>

<script type="text/javascript" >
    $(document).on("ready", function()
    {
        var events = [
            {% for reunion in reunions %}
            "{{reunion.date_reunion|date:'Y-m-d'}}",
            {% endfor %}                            
        ];
        $( "#datepicker" ).text("")
        var dp = $( "#datepicker" ).datepicker({ 
            monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],
            dayNamesMin: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sa'],
            nextText: 'Siguiente',
            prevText: 'Anterior',
            dateFormat: 'yy-mm-dd',
            beforeShowDay: function(date) {
                var current = $.datepicker.formatDate('yy-mm-dd', date);
                return jQuery.inArray(current, events) == -1 ? [true, 'ui-state-disabled'] : [true, 'encima', 'aqui hay un evento!'];
            },
            onSelect: function(dateText, inst) {  //alert("new date: " + dateText); //+ " " + $(this).datepicker('getDate'));
                top.location="/groups/calendar/"+dateText;
                //setAlert("Fecha",dateText);
            }
        });    
    })
</script>
{% endblock %}