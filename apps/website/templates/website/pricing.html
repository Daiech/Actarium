{% extends "public_base.html" %}
{% load i18n %}
{% block TITLE %}{% trans 'Precios' %}{% endblock %}

{% block content %}
<div class="container-fluid pricing-container">
    <header>{% trans 'Costo por miembro en una organización' %} <h1>{% trans 'PRECIOS' %}</h1></header>
    <div class="row pricing-content">
        <div class="col-xs-12 col-sm-2 hidden-xs">
            <div class="row">
                <div class="col-xs-12 col-sm-12">
                    <img src="{{ STATIC_URL }}img/pricing/1.png" width="120px">
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-10">
            <div class="row">
                <div id="pricing-methods"></div>
                <div class="col-xs-6 col-md-2 pricing-personal">
                    <a href="#pricing-calculator"><p>{% trans 'Calcula el precio adecuado para ti' %}<br>$</p></a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid pricing-container" id="pricing-calculator">
    <header>{% trans 'Calcula el costo correcto para tu organización' %}</header>
    <p class="text-description">{% trans 'Los precios varían dependiendo del número de miembros de tu equipo, calcula el precio exacto antes de comprar' %}</p>
    <form method="post" action="">
        {% csrf_token %}
        <div id="pricing-calculator-box">
            <div class="row">
                <div class="col-md-5 pricing-total" >
                    <input type="text" value="5" id="team-number" />
                    <p>{% trans 'Miembros del quipo' %}</p>
                </div>
                <div class="col-md-1 arrow-right">
                    <img src="{{ STATIC_URL }}img/pricing/arrow-right.png">
                </div>
                <div class="col-md-5 pricing-total">
                    <div class="total">
                        <span id="pricing-money">$0</span>
                    </div>
                    <p>{% trans 'Costo total mes (COP)' %}</p>
                </div>
                <div class="col-md-1 arrow-right">
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-success btn-large">{% blocktrans %} Comprar <span id="num"></span> cupos de miembros para tu organización {% endblocktrans %}</button>
    </form>
</div>
<script type="text/template" id="btn-action">
    <a href="{% url 'log_in'  %}" class="btn btn-link">{% trans 'Inicia sesión' %}</a>
    <a href="{% url 'new_user'  %}" class="btn btn-success btn-large">{% trans 'Registrate gratis' %}</a>
</script>
<script type="text/template" id="pricing-template">
{% verbatim %}
{% for pr in pricing %}
    <div class="col-xs-6 col-md-2">
        <div class="pricing-block">
            <div class="pricing">
                <p><sup>$</sup>{{ pr.price }}</p>
                <p class="pricing-payment">{{ pr.payment }}</p>
            </div>
            <div class="arrow">
                <img src="/static/img/pricing/arrow.png">
            </div>
            <div class="members">
                <p class="pricing-member-numbers">{{ pr.members_num.to }} <span class="pricing-a">{{ pr.members_num.inter_text }}</span> {{ pr.members_num.until }}</p>
                <p>{{ pr.members_name }}</p>
            </div>
        <div class="pricing-suscripcion"><a href="{{ pr.url_suscribe }}">{{ pr.suscribe }}</a></div>
        </div>
    </div>
{% endfor %}
{% endverbatim %}
</script>
{%endblock%}

{%block style %}
<style type="text/css">
    @font-face{font-family: HelveticaNeueLT;src: url({{ STATIC_URL }}fonts/HELVETICANEUELTSTD-TH.OTF);}
    @font-face{font-family: Bebas;src: url({{ STATIC_URL }}fonts/BEBAS.TTF);}
    #social-buttons{display: none;visibility: hidden;}
    #btn-group-action {margin-top: 20px}
    #btn-group-action a{margin: 4px 5px;}
    #btn-group-action a.btn-large{padding: 9px;margin-top: 3px;}
    header.navbar{border-bottom: solid 20px #B3DB35;border-radius: 0}
    #public_topbar{height: 90px;background-color: white;}
    #public_topbar #public_logo{display: inline-block;}

    .pricing-container{text-align: center;color: #888;font-family: HelveticaNeueLT;}
    .pricing-container header h1{display: inline-block;color: #00aeaa;font-size: 50px;font-family: Bebas;}
    .pricing-container header{font-size: 35px;}
    .pricing-container p.text-description{font-size: 20px;padding: 15px 0}

    .pricing-content{margin-top: 25px;font-family: Helvetica;font-size: 35px;}
    .pricing-content >div, .pricing-content #pricing-methods > div{margin-bottom: 15px;}
    .pricing-content .pricing-block{border:solid thin #dadada;min-height: 270px;line-height: 1;box-shadow: 0 4px 9px 0 #888;}

    .pricing-content .pricing-block .pricing{height: 108px;font-family: Bebas;margin-left: -13px;padding-top: 30px;}
    .pricing-content .pricing-block .pricing p.pricing-payment{font-family: HelveticaNeueLT;font-size: 20px;margin: 0;margin-left: 14px;}
    .pricing-content .pricing-block .arrow{height: 54px;}
    .pricing-content .pricing-block .members{height: 108px;}
    .pricing-content .pricing-block .members p.pricing-member-numbers{font-family: Bebas;font-size: 40px;}
    .pricing-content .pricing-block .members p{font-size: 24px;font-family: HelveticaNeueLT;}
    .pricing-suscripcion{font-size: 20px;position: relative;width: auto;padding: 0;bottom: 0;background-color: #B3DB35;padding: 7px;}
    .pricing-suscripcion a{color: white;}
    .pricing-a{font-size: 22px;}

    .pricing-personal{font-family: HelveticaNeueLT;border:solid thin white;}
    .pricing-personal a:hover{color: #00aeaa;}
    .pricing-personal:hover{border-color: #dadada; cursor: pointer;box-shadow: 0 4px 9px #888;}
    .pricing-personal p{line-height: 1.4;padding-top: 26px;}


    #pricing-calculator{margin: 120px auto;margin-bottom: 80px}
    #pricing-calculator #pricing-calculator-box{border: solid thin #dadada; width: 50%;margin: 40px auto;font-size: 30px;padding: 40px;}
    #pricing-calculator #pricing-calculator-box input{text-align: center;width: 180px;font-size: 50px;color: #00aeaa}
    #pricing-calculator #pricing-calculator-box input:focus{outline: 0;border-color:#00aeaa;}
    .arrow-right{margin-top: 12px;}
    .pricing-total p{font-size: 20px;margin-top: 10px;}
    .pricing-total .total{font-size: 60px;color: #00aeaa;margin-top: 10px;height: 60px;line-height: 1}

    @media (max-width: 768px) {
        #pricing-calculator #pricing-calculator-box{width: 90%}
    }
</style>
{%endblock%}


{% block js %}
<script src="{{STATIC_PREFIX}}js/vendor/swig.min.js"></script>
<script src="{{STATIC_PREFIX}}js/vendor/jquery.formatCurrency-1.4.0.js"></script>
<script>
    $(document).ready(function(e){
        $("#btn-group-action").html(swig.render($("#btn-action").html(), {locals:{}}));
        $("#feed-option").animate({"top": ($(window).height() - 210) + "px" }, 1000);
        $("a[href='#pricing-calculator']").on("click", function (e) {
            e.preventDefault();
            goToByScroll("#pricing-calculator",function (e) {
                $("#team-number").focus();
            });
        })
        $("#team-number").on("keyup", function (e) {
            var num = $(this).val();
            calculate_pricing(num);
        });
        calculate_pricing (5);
        function calculate_pricing (num) {
            if (parseInt(num) >= 5){
                sendNewAjax("{% url 'core:get_total_price' %}",
                    {"quantity": num},
                    function (data) {
                        $("#num").text(num);
                        $("#pricing-money").text(data.quantity).formatCurrency({roundToDecimalPlace: -2});
                    },
                    {"method":"post"});
            }else{
                console.log("no puedes comprar menos de 5 usuarios.");
            }
        }
        set_initial_pricing_box ();
        function set_initial_pricing_box () {
            mn = "{% trans 'miembros' %}";
            payment = "{% trans 'mes/miembro' %}";
            to = " {% trans 'a' %} ";
            suscribe = "{% trans 'Suscribirse' %}";
            url_s = "{% url 'new_user' %}"
            pricing = {
                "0": {price: 0, payment: payment, members_num: {to: "", inter_text: "", until: 5}, members_name: mn, suscribe: suscribe, url_suscribe: url_s},
                "1": {price: 5000, payment: payment, members_num: {to: 6, inter_text: to, until: 10}, members_name: mn, suscribe: suscribe, url_suscribe: url_s},
                "2": {price: 4100, payment: payment, members_num: {to: 11, inter_text: to, until: 20}, members_name: mn, suscribe: suscribe, url_suscribe: url_s},
                "3": {price: 3000, payment: payment, members_num: {to: 21, inter_text: to, until: 35}, members_name: mn, suscribe: suscribe, url_suscribe: url_s},
                "4": {price: 2900, payment: payment, members_num: {to: "", inter_text: "", until: "+35"}, members_name: mn, suscribe: suscribe, url_suscribe: url_s},
            }
            $("#pricing-methods").html(swig.render($("#pricing-template").html(), {locals: pricing}));
        }
    });
</script>
{% endblock %}